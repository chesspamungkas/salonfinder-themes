{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/index.ts","webpack:///./src/js/TopHeaderBar/TopHeaderBar.js","webpack:///./src/js/SearchResults/SearchResults.js","webpack:///./node_modules/properjs-pushstate/PushState.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","document","ready","$","console","log","window","width","css","hasClass","on","toggleClass","cookie","search","pushstate","require","location","origin","pathname","params","substring","split","forEach","index","includes","parseInt","checkLoadMoreBtn","formObj","data","find","hide","show","html","click","e","currentLink","this","link","attr","xhr","XMLHttpRequest","ajax","success","status","jqXHR","href","newHtml","append","push","responseURL","length","preventDefault","PushState","init","apply","arguments","constructor","_pushable","history","_hashable","options","_initUrl","replace","hash","_options","_enabled","_ishashpushed","_uid","_states","_callbacks","uid","getUID","_stateEnable","event","callback","_pushstateID","_pushstateType","off","splice","url","_push","goBack","back","_fire","goForward","forward","forceHash","pushState","hashUri","slice","self","handler","indexOf","addEventListener"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","import '../css/index.scss';\r\nimport './TopHeaderBar/TopHeaderBar.js';\r\nimport './SearchResults/SearchResults.js';\r\n// import './custom.js';\r\n// import './slick.min.js';","jQuery( document ).ready( function( $ ) {\r\n    if ( $( '#wpadminbar' )[0] ) {\r\n        console.log( 'fix wpadminbar' );\r\n        // jQuery( 'div#page-container' ).css( { 'margin-top': '32px' } );\r\n        if( $( window ).width() > 480 ) {\r\n            $( '.top-header-bk-bar' ).css( { 'top': '32px' } );\r\n            $( '#main-header-container' ).css( { 'top': '72px' } );\r\n\r\n            if( !$( 'body' ).hasClass( 'home' ) ) {\r\n                $( '#content-area' ).css( { 'margin-top': '50px' } );\r\n            }\r\n        } else {\r\n            $( '#wpadminbar' ).css( 'position', 'fixed' );\r\n            $( '.fixed-top' ).css( { 'top': '45px' } );\r\n            $( '#main-menu-container, #top-search-container' ).css( { 'margin-top': '45px' } );\r\n\r\n            if( $( 'body' ).hasClass( 'home' ) ) {\r\n                // jQuery( '#content-area' ).css( { 'margin-top': '32px' } );\r\n            } else {\r\n                $( '#content-area' ).css( { 'margin-top': '50px' } );\r\n            }\r\n        }\r\n        // console.log( jQuery( '#main-header-container' ).css( 'top' ) );\r\n    } else {\r\n        if( $( 'body' ).hasClass( 'home' ) ) {\r\n            // jQuery( '#content-area' ).css( { 'margin-top': '32px' } );\r\n        } else {\r\n            $( '#content-area' ).css( { 'margin-top': '50px' } );\r\n        }\r\n    }\r\n\r\n    jQuery( 'body' ).on( 'click', '.main-menu-btn', function() {\r\n        jQuery('body').toggleClass('showMenu')\r\n    } );\r\n\r\n    if ( document.cookie.search(/\\wordpress_logged_in-\\S*=/) < 0 ) {\r\n        // console.log( $( '.my-account' ).attr( 'href' ) );\r\n        // $( '.my-account' ).text( 'LOGIN/REGISTER' );\r\n        // $( '.my-account' ).attr( 'href', 'yourdomain.com/login' );\r\n        // $( '.account-btn' ).attr( 'href', 'yourdomain.com/login' );\r\n    }\r\n} );","var PushState = require( \"properjs-pushstate\" ),\r\n    pushstate = new PushState({\r\n\r\n    });\r\n(function() {\r\n  jQuery(document).ready(function($) {\r\n    var path = window.location.origin + window.location.pathname;\r\n    var params = window.location.search.substring(1).split( '&' );\r\n    var page = 1;\r\n\r\n    if( params ) {\r\n      params.forEach( function( value, index ) {\r\n        if( value.includes( 'page' ) ) {\r\n          page = parseInt( value.split( '=' )[1] );\r\n        }\r\n      } );\r\n    }\r\n\r\n    // if( page ) {\r\n    //   let queryLink = path + '?page=';\r\n    //   for( $i = 2; $i <= page; $i++ ) {\r\n    //     $.ajax( queryLink+$i, {\r\n    //       xhr: function() {\r\n    //         return xhr;\r\n    //       },\r\n    //       success: function( data, status, jqXHR ) {\r\n    //         let newHtml = $(data).find('#search-results').html();\r\n    //         $( \"#search-results\" ).append( newHtml );\r\n    //       }\r\n    //     });\r\n    //   }\r\n    // }\r\n\r\n    var checkLoadMoreBtn = (formObj) => {\r\n      var totalPages = $(formObj).data('total-pages')\r\n      var loadedPage = $(formObj).data('paged')\r\n      var hide = totalPages<=loadedPage\r\n      if(hide)\r\n        $(formObj).find('.searchNextPage').hide();\r\n      else \r\n        $(formObj).find('.searchNextPage').show();\r\n    }\r\n\r\n    checkLoadMoreBtn($('#search-result-body'))\r\n\r\n    $( 'a.searchNextPage' ).html( 'Load More <i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i>' );\r\n    $('a.searchNextPage').click(function(e) {\r\n      var currentLink = this;\r\n      var link = $(currentLink).attr('href');\r\n      var xhr = new XMLHttpRequest();\r\n\r\n      $( 'a.searchNextPage' ).html( '<span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>Loading...' );\r\n\r\n      $.ajax( link, {\r\n        xhr: function() {\r\n          return xhr;\r\n        },\r\n        success: function( data, status, jqXHR ) {\r\n          var href = $(data).find('.searchNextPage').attr('href');\r\n          var newHtml = $(data).find('#search-results').html();\r\n          var loadedPage = $(data).find('#search-result-body').data('paged')\r\n          \r\n          $( \"#search-results\" ).append( newHtml );\r\n          \r\n          pushstate.push( xhr.responseURL );\r\n\r\n          if( $(data).find('.searchNextPage').length ) {\r\n            $( currentLink ).attr('href', href);\r\n            $( 'a.searchNextPage' ).html( 'Load More <i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i>' );\r\n          }\r\n          checkLoadMoreBtn($('#search-result-body'))\r\n        }\r\n      });\r\n      e.preventDefault();\r\n    })\r\n    \r\n  })\r\n  \r\n})()\r\n","/*!\n *\n * Handles history pushstate/popstate with async option\n * If history is not supported, falls back to hashbang!\n *\n * @PushState\n * @author: kitajchuk\n *\n */\n(function ( factory ) {\n\n    if ( typeof exports === \"object\" && typeof module !== \"undefined\" ) {\n        module.exports = factory();\n\n    } else if ( typeof window !== \"undefined\" ) {\n        window.PushState = factory();\n    }\n\n})(function () {\n\n    /**\n     *\n     * A simple pushState Class\n     * @constructor PushState\n     * @memberof! <global>\n     *\n     */\n    var PushState = function () {\n        return this.init.apply( this, arguments );\n    };\n\n    PushState.prototype = {\n        constructor: PushState,\n\n        /**\n         *\n         * Flag whether pushState is enabled\n         * @memberof PushState\n         * @member _pushable\n         * @private\n         *\n         */\n        _pushable: (\"history\" in window && \"pushState\" in window.history),\n\n        /**\n         *\n         * Fallback to hashchange if needed. Support:\n         * <ul>\n         * <li>Internet Explorer 8</li>\n         * <li>Firefox 3.6</li>\n         * <li>Chrome 5</li>\n         * <li>Safari 5</li>\n         * <li>Opera 10.6</li>\n         * </ul>\n         * @memberof PushState\n         * @member _hashable\n         * @private\n         *\n         */\n        _hashable: (\"onhashchange\" in window),\n\n        /**\n         *\n         * PushState init constructor method\n         * @memberof PushState\n         * @method PushState.init\n         * @param {object} options Settings for PushState\n         * <ul>\n         * <li>options.forceHash</li>\n         * </ul>\n         *\n         * @fires backstate\n         * @fires forwardstate\n         * @fires popstate\n         *\n         */\n        init: function ( options ) {\n            /**\n             *\n             * Ensure this first cache URL is clean as a whistle\n             * @memberof PushState\n             * @member _initUrl\n             * @private\n             *\n             */\n            this._initUrl = window.location.href.replace( window.location.hash, \"\" );\n\n            /**\n             *\n             * User options for usage\n             * @memberof PushState\n             * @member _options\n             * @private\n             *\n             */\n            this._options = (options || {});\n\n            /**\n             *\n             * Flag whether state is enabled\n             * @memberof PushState\n             * @member _enabled\n             * @private\n             *\n             */\n            this._enabled = false;\n\n            /**\n             *\n             * Flag when hash is changed by PushState\n             * This allows appropriate replication of popstate\n             * @memberof PushState\n             * @member _ishashpushed\n             * @private\n             *\n             */\n            this._ishashpushed = false;;\n\n            /**\n             *\n             * Unique ID ticker\n             * @memberof PushState\n             * @member _uid\n             * @private\n             *\n             */\n            this._uid = 0;\n\n            /**\n             *\n             * Stored state objects\n             * @memberof PushState\n             * @member _states\n             * @private\n             *\n             */\n            this._states = {};\n\n            /**\n             *\n             * Event callbacks\n             * @memberof PushState\n             * @member _callbacks\n             * @private\n             *\n             */\n            this._callbacks = {};\n\n            // Set initial state\n            this._states[ this._initUrl ] = {\n                uid: this.getUID()\n            };\n\n            // Enable popstate management\n            this._stateEnable();\n        },\n\n        /**\n         *\n         * Bind a callback to an event\n         * @memberof PushState\n         * @method on\n         * @param {string} event The event to bind to\n         * @param {function} callback The function to call\n         *\n         */\n        on: function ( event, callback ) {\n            if ( typeof callback === \"function\" ) {\n                if ( !this._callbacks[ event ] ) {\n                    this._callbacks[ event ] = [];\n                }\n\n                callback._pushstateID = this.getUID();\n                callback._pushstateType = event;\n\n                this._callbacks[ event ].push( callback );\n            }\n        },\n\n        /**\n         *\n         * Unbind a callback to an event\n         * @memberof PushState\n         * @method off\n         * @param {string} event The event that was bound\n         * @param {function} callback The function to remove\n         *\n         */\n        off: function ( event, callback ) {\n            if ( this._callbacks[ event ] ) {\n                for ( var i = this._callbacks[ event ].length; i--; ) {\n                    if ( this._callbacks[ event ][ i ]._pushstateID === callback._pushstateID ) {\n                        this._callbacks[ event ].splice( i, 1 );\n                        break;\n                    }\n                }\n            }\n        },\n\n        /**\n         *\n         * Push onto the History state\n         * @memberof PushState\n         * @method push\n         * @param {string} url address to push to history\n         *\n         */\n        push: function ( url ) {\n            // Dont push current URL\n            if ( url === window.location.href ) {\n                return;\n            }\n\n            this._push( url );\n\n            this._states[ url ] = {\n                uid: this.getUID()\n            };\n        },\n\n        /**\n         *\n         * Manually go back in history state\n         * @memberof PushState\n         * @method goBack\n         *\n         * @fires backstate\n         *\n         */\n        goBack: function () {\n            window.history.back();\n\n            this._fire( \"backstate\" );\n        },\n\n        /**\n         *\n         * Manually go forward in history state\n         * @memberof PushState\n         * @method goForward\n         *\n         * @fires forwardstate\n         *\n         */\n        goForward: function () {\n            window.history.forward();\n\n            this._fire( \"forwardstate\" );\n        },\n\n        /**\n         *\n         * Get a unique ID\n         * @memberof PushState\n         * @method getUID\n         * @returns number\n         *\n         */\n        getUID: function () {\n            this._uid = (this._uid + 1);\n\n            return this._uid;\n        },\n\n        /**\n         *\n         * Calls window.history.pushState\n         * @memberof PushState\n         * @method _push\n         * @param {string} url The url to push\n         * @private\n         *\n         */\n        _push: function ( url ) {\n            if ( this._pushable && !this._options.forceHash ) {\n                window.history.pushState( this._states[ url ], \"\", url );\n\n            } else {\n                // This replace ensures we get the following:\n                // \"/\":         root\n                // \"/foo/bar/\": uri path\n                var hashUri = url.replace( window.location.origin, \"\" );\n\n                // Fix for root hash uri.\n                // Ensure we dont get the following:\n                // \"/foo/bar/#/foo/bar/\"\n                // Rather we would get the following:\n                // \"/foo/bar/#/\"\n                if ( hashUri === window.location.pathname ) {\n                    hashUri = \"/\";\n                }\n\n                this._ishashpushed = true;\n\n                window.location.hash = hashUri;\n            }\n        },\n\n        /**\n         *\n         * Fire an events callbacks\n         * @memberof PushState\n         * @method _fire\n         * @param {string} event The event to fire\n         * @param {string} url The current url\n         * @private\n         *\n         */\n        _fire: function ( event, url ) {\n            if ( this._callbacks[ event ] ) {\n                for ( var i = this._callbacks[ event ].length; i--; ) {\n                    this._callbacks[ event ][ i ].apply( this, [].slice.call( arguments, 1 ) );\n                }\n            }\n        },\n\n        /**\n         *\n         * Bind this instances state handler\n         * @memberof PushState\n         * @method _stateEnabled\n         * @private\n         *\n         * @fires popstate\n         *\n         */\n        _stateEnable: function () {\n            if ( this._enabled ) {\n                return this;\n            }\n\n            var self = this,\n                handler = function () {\n                    var url = window.location.href,\n                        roots = [\"#/\", \"#\", \"\"];\n\n                    // Ensure we clean out the hash for Router\n                    // Example:\n                    // Start:  http://localhost/foo/#/bar/\n                    // Result: http://localhost/foo/bar/\n                    if ( self._options.forceHash ) {\n                        // Shave the hash from the end of the URL\n                        url = url.replace( window.location.hash, \"\" );\n\n                        // Shave the hash root from the end of the URL\n                        url = url.replace( window.location.pathname, \"\" );\n\n                        // Empty hash means we have gone back to root\n                        if ( roots.indexOf( window.location.hash ) !== -1 ) {\n                            // Append the hash root to the URL\n                            url = (url + window.location.pathname);\n\n                        } else {\n                            // Append the applied hash pathname to the URL\n                            url = (url + window.location.hash.replace( \"#\", \"\" ));\n                        }\n                    }\n\n                    self._fire( \"popstate\", url, self._states[ url ] );\n                };\n\n            this._enabled = true;\n\n            if ( this._pushable && !this._options.forceHash ) {\n                window.addEventListener( \"popstate\", function ( e ) {\n                    handler();\n\n                }, false );\n\n            } else if ( this._hashable ) {\n                // For hashstate we should apply initial hash on page load\n                this._push( this._initUrl );\n\n                window.addEventListener( \"hashchange\", function ( e ) {\n                    if ( !self._ishashpushed ) {\n                        handler();\n\n                    } else {\n                        self._ishashpushed = false;\n                    }\n\n                }, false );\n            }\n        }\n    };\n\n    return PushState;\n\n});"],"sourceRoot":""}